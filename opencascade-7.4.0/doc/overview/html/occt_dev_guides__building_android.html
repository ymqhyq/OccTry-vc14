<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Open CASCADE Technology: Building with CMake for Android</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="occ_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Open CASCADE Technology
   &#160;<span id="projectnumber">7.4.0.beta</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('occt_dev_guides__building_android.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Building with CMake for Android </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This article describes the steps to build OCCT libraries for Android from a complete source package with GNU make (makefiles) on Windows 7 and Ubuntu 15.10.</p>
<p>The steps on Windows and Ubuntu are similar. There is the only one difference: makefiles are built with mingw32-make on Windows and native GNU make on Ubuntu.</p>
<p>Required tools (download and install if it is required):</p><ul>
<li>CMake v3.7+ <a href="https://www.cmake.org/cmake/resources/software.html">https://www.cmake.org/cmake/resources/software.html</a></li>
<li>Android NDK rev.10+ <a href="https://developer.android.com/tools/sdk/ndk/index.html">https://developer.android.com/tools/sdk/ndk/index.html</a></li>
<li>GNU Make: MinGW v4.82+ for Windows (<a href="https://sourceforge.net/projects/mingw/files/">https://sourceforge.net/projects/mingw/files/</a>), GNU Make 4.0 for Ubuntu.</li>
</ul>
<h2>Prerequisites</h2>
<p>In toolchain file <em>$CASROOT/adm/templates/android.toolchain.config.cmake</em>:</p>
<ul>
<li>Set CMAKE_ANDROID_NDK variable equal to your Android NDK path.</li>
<li>Set CMAKE_ANDROID_STL_TYPE variable to specify which C++ standard library to use.</li>
</ul>
<p>The default value of CMAKE_ANDROID_STL_TYPE is <em>gnustl_shared</em> (GNU libstdc++ Shared)</p>
<div class="image">
<img src="android_image001.png" alt="android_image001.png"/>
</div>
<h2>Generation of makefiles using CMake GUI tool</h2>
<p>Run GUI tool provided by CMake: cmake-gui</p>
<h3>Tools configuration</h3>
<ul>
<li>Specify the root folder of OCCT (<em>$CASROOT</em>, which contains <em>CMakelists.txt</em> file) by clicking <b>Browse Source</b>.</li>
<li>Specify the location (build folder) for Cmake generated project files by clicking <b>Browse Build</b>.</li>
</ul>
<div class="image">
<img src="android_image002.png" alt="android_image002.png"/>
</div>
<p>Click <b>Configure</b> button. It opens the window with a drop-down list of generators supported by CMake project.</p>
<p>Select "MinGW Makefiles" item from the list</p><ul>
<li>Choose "Specify toolchain file for cross-compiling"</li>
<li>Click "Next"</li>
</ul>
<div class="image">
<img src="android_image003.png" alt="android_image003.png"/>
</div>
<ul>
<li>Specify a toolchain file at the next dialog by <em>android.toolchain.config.cmake</em> . It is contained by cross-compilation toolchain for CMake</li>
<li>Click "Finish" <div class="image">
<img src="android_image004.png" alt="android_image004.png"/>
</div>
</li>
</ul>
<p>If on Windows the message is appeared: "CMake Error: CMake was unable to find a build program corresponding to "MinGW Makefiles"
CMAKE_MAKE_PROGRAM is not set.  You probably need to select a different build tool.", specify <b>CMAKE_MAKE_PROGRAM</b> to mingw32-make executable. </p><div class="image">
<img src="android_image005.png" alt="android_image005.png"/>
</div>
<h3>OCCT Configuration</h3>
<p>How to configure OCCT, see "OCCT Configuration" section of <a class="el" href="occt_dev_guides__building_cmake.html">Building with CMake</a></p>
<h3>Generation of makefiles</h3>
<p>Click <b>Generate</b> button and wait until the generation process is finished. Then makefiles will appear in the build folder (e.g. <em> D:/occt/build-android </em>).</p>
<h2>Generation of makefiles using CMake from the command line</h2>
<p>Alternatively one may specify the values without a toolchain file:</p>
<blockquote class="doxtable">
<p>cmake -G "MinGW Makefiles" -DCMAKE_SYSTEM_NAME=Android -DCMAKE_ANDROID_NDK=D:/DevTools/android-ndk-r13b -DCMAKE_ANDROID_STL_TYPE=gnustl_shared -DCMAKE_SYSTEM_VERSION=15 -DCMAKE_ANDROID_ARCH_ABI=armeabi-v7a -DCMAKE_MAKE_PROGRAM=D:/DevTools/MinGW/bin/mingw32-make.exe -D3RDPARTY_DIR=D:/occt-3rdparty D:/occt </p>
</blockquote>
<div class="image">
<img src="android_image006.png" alt="android_image006.png"/>
</div>
<h2>Building makefiles of OCCT</h2>
<p>Open console and go to the build folder. Type "mingw32-make" (Windows) or "make" (Ubuntu) to start build process.</p>
<blockquote class="doxtable">
<p>mingw32-make </p>
</blockquote>
<p>or </p><blockquote class="doxtable">
<p>make </p>
</blockquote>
<p>Parallel building can be started with using **"-jN"** argument of "mingw32-make/make", where N is the number of building threads.</p>
<blockquote class="doxtable">
<p>mingw32-make -j4 </p>
</blockquote>
<p>or </p><blockquote class="doxtable">
<p>make -j4 </p>
</blockquote>
<h2>Install built OCCT libraries</h2>
<p>Type "mingw32-make/make" with argument "install" to place the libraries to the install folder (see "OCCT Configuration" section of <a class="el" href="occt_dev_guides__building_cmake.html">Building with CMake</a>)</p>
<blockquote class="doxtable">
<p>mingw32-make install </p>
</blockquote>
<p>or </p><blockquote class="doxtable">
<p>make install</p>
</blockquote>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Sep 26 2019 18:39:17 for Open CASCADE Technology by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
